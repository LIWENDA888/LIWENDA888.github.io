<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç´ æåº“ - è‡ªåœ¨é€ å­—(ZIZAO)</title>
    <meta name="description" content="è‡ªåœ¨é€ å­—ï¼Œä¸“æ³¨å­—ä½“å­—åº“äº§å“åˆ¶ä½œä¸åˆ†äº«">
    <meta name="author" content="è‡ªåœ¨é€ å­—">
    <meta property="og:title" content="ç´ æåº“ - è‡ªåœ¨é€ å­—(ZIZAO)">
    <meta property="og:image" content="https://pic3.fukit.cn/autoupload/NWINCyTOTWqNUcPQazQq69iO_OyvX7mIgxFBfDMDErs/20251101/abRh/500X180/logo.png/webp">
    <meta property="og:url" content="https://www.zizao.top">
    <meta property="og:type" content="website">
    <link rel="icon" href="https://pic3.fukit.cn/autoupload/NWINCyTOTWqNUcPQazQq69iO_OyvX7mIgxFBfDMDErs/20251101/8hkj/ico.ico" type="zizaoicon">
    
    <style>
        /* --- CSS æ ·å¼éƒ¨åˆ† --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
        }

        html, body {
            height: 100%;
            min-height: 100vh;
        }

        /* ä¸»ä½“èƒŒæ™¯è‰²æ”¹ä¸ºç™½è‰² */
        body {
            background-color: #ffffff; 
            color: #1a1a1a;
        }

        /* é¡µé¢åŒ…è£¹å™¨ */
        .page-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- å¯¼èˆªæ æ ·å¼ --- */
        .navbar {
            position: sticky; 
            top: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.03);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 60px; 
            z-index: 1000;
            transition: all 0.4s ease;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.02);
        }
        
        .main-content { 
            flex-grow: 1; 
            padding-top: 40px; 
            width: 100%; 
            display: flex; 
            justify-content: center;
        }

        /* å¯¼èˆªæ å†…éƒ¨å…ƒç´  */
        .navbar-logo { display: flex; align-items: center; text-decoration: none; }
        .navbar-logo img { height: 30px; width: auto; display: block; }
        .menu-toggle { display: none; background: none; border: none; cursor: pointer; padding: 10px; z-index: 1001; }
        .menu-toggle-icon { display: block; width: 25px; height: 2px; background-color: #1a1a1a; position: relative; transition: all 0.3s ease; }
        .menu-toggle-icon::before, .menu-toggle-icon::after { content: ''; position: absolute; width: 100%; height: 2px; background-color: #1a1a1a; transition: all 0.3s ease; }
        .menu-toggle-icon::before { top: -8px; }
        .menu-toggle-icon::after { top: 8px; }
        .navbar-menu { display: flex; list-style: none; gap: 50px; height: 100%; align-items: center; }
        .menu-item { position: relative; height: 100%; display: flex; align-items: center; cursor: pointer; }
        .menu-link { text-decoration: none; color: #1a1a1a; font-size: 15px; font-weight: 500; letter-spacing: 0.5px; transition: color 0.3s ease; position: relative; }
        .menu-item:hover .menu-link { color: #444444; }
        .menu-link::after { content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 0; height: 2px; background-color: #1a1a1a; transition: width 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); border-radius: 2px; }
        .menu-item:hover .menu-link::after { width: 20px; }
        .dropdown { position: absolute; top: 80px; left: 50%; transform: translateX(-50%) translateY(20px); background-color: rgba(255, 255, 255, 0.98);backdrop-filter: blur(10px); min-width: 220px; padding: 20px 0; border-radius: 4px; box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08); opacity: 0; visibility: hidden; transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1); }
        .menu-item:hover .dropdown { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }
        .dropdown li { list-style: none; }
        .dropdown-link { display: block; padding: 12px 30px; text-decoration: none; color: #666; font-size: 14px; transition: all 0.3s ease; display: flex; justify-content: space-between; align-items: center; }
        .dropdown-link:hover { color: #000; background-color: #fff; padding-left: 35px; }
        .dropdown-link::after { content: 'â†’'; font-size: 12px; color: #1a1a1a; opacity: 0; transform: translateX(-10px); transition: all 0.3s ease; }
        .dropdown-link:hover::after { opacity: 1; transform: translateX(0); }
        .navbar-actions { display: flex; align-items: center; }
        .btn-primary {
            padding: 8px 28px; background-color: #1a1a1a; color: #fff; text-decoration: none;
            font-size: 14px; font-weight: 600; border-radius: 50px; border: 1px solid #1a1a1a;
            display: flex; align-items: center; gap: 0; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); 
        }
        .btn-primary:hover {
            background-color: #333333; border-color: #333333; color: #fff; transform: translateY(-1px); 
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2); 
        }

        /* --- å¸ƒå±€å®¹å™¨ --- */
        .doc-container {
            width: 100%;
            max-width: 1600px; 
            margin: 0 auto 40px; 
            padding: 0 30px; 
            display: flex;
            gap: 30px; 
        }

        /* --- ä¾§è¾¹æ  Sidebar --- */
        .sidebar {
            width: 300px; 
            flex-shrink: 0; 
            position: sticky; 
            top: 120px; 
            max-height: calc(100vh - 160px); 
            overflow-y: auto; 
            background-color: transparent; 
            box-shadow: none; 
            border: 1px solid rgba(0, 0, 0, 0.08); 
            border-radius: 12px; 
            padding: 10px 0; 
        }
        /* éšè—ä¾§è¾¹æ çš„æ»šåŠ¨æ¡ */
        .sidebar::-webkit-scrollbar { width: 0; }
        .sidebar { -ms-overflow-style: none; scrollbar-width: none; }


        /* ä¾§è¾¹æ èœå•æ ·å¼ */
        .sidebar-menu { list-style: none; padding: 0 10px; }
        .category-item { margin-bottom: 2px; }
        .category-header { 
            padding: 12px 15px; font-weight: 700; color: #1a1a1a; cursor: pointer; 
            transition: all 0.2s ease; font-size: 16px; border-radius: 8px; margin-top: 10px; 
            display: flex; justify-content: space-between; align-items: center; 
        }
        /* ä¾§è¾¹æ ä¸»æ ‡é¢˜ Hover ä¼˜åŒ– */
        .category-header:hover { 
            background-color: rgba(0,0,0,0.03); 
            transform: translateX(2px); 
        }
        .category-header span { font-size: 10px; transition: transform 0.3s ease; transform: rotate(-90deg); color: #999; }
        .category-header.open span { transform: rotate(0deg); }
        .subcategory-list { 
            list-style: none; 
            overflow: hidden; 
            max-height: 0; 
            transition: max-height 0.4s ease-out; 
            background-color: transparent; 
            margin: 0 5px 8px 5px; 
            padding: 0; 
        }
        .subcategory-link { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 10px 15px 10px 20px; text-decoration: none; color: #666; font-size: 15px; 
            transition: all 0.2s ease; border-radius: 6px; 
        }
        .subcategory-link:hover { color: #1a1a1a; background-color: rgba(0,0,0,0.02); } 
        .subcategory-link.active { color: #1a1a1a; font-weight: 600; background-color: rgba(0,0,0,0.05); } 
        .count-badge { font-size: 12px; background: rgba(0,0,0,0.04); color: #666; padding: 2px 8px; border-radius: 10px; font-weight: normal; } 
        
        /* --- æœç´¢æ¡†æ ·å¼è°ƒæ•´ --- */
        .search-container {
            width: 100%;
            /* å¢åŠ å·¦å³å†…è¾¹è·ï¼Œä½¿å…¶ä¸ .sidebar-menu å¯¹é½ */
            padding: 0 10px; 
            margin-bottom: 0;
        }

        #font-search-input {
            width: 100%;
            padding: 12px 20px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            transition: all 0.3s ease;
            outline: none;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            -webkit-appearance: none; 
            /* å¢åŠ åº•å¤–è¾¹è·ï¼Œä»¥åˆ†éš”æœç´¢æ¡†å’Œä¸‹é¢çš„åˆ†ç±»èœå• */
            margin-bottom: 10px; 
        }

        #font-search-input:focus {
            border-color: #1a1a1a;
            box-shadow: 0 0 0 3px rgba(26, 26, 26, 0.1);
        }
        /* --- å³ä¾§å†…å®¹åŒºåŸŸ --- */
        .content-area {
            flex-grow: 1;
            background-color: transparent; 
            padding: 0; 
            border-radius: 0;
            box-shadow: none;
            border: none;
            display: flex;
            flex-direction: column;
        }

        .grid-header {
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }
        .grid-header h2 { font-size: 24px; color: #1a1a1a; font-weight: 700; }
        .grid-header p { font-size: 14px; color: #666; margin-top: 5px; }

        .font-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); 
            gap: 15px; 
            width: 100%;
        }

        /* --- å­—ä½“å¡ç‰‡ç»„ä»¶ (åº”ç”¨æµ…æ¸å˜èƒŒæ™¯) --- */
        .font-card {
            /* åŸºç¡€èƒŒæ™¯è‰² */
            background: #ffffff; 
            /* æµ…æ¸å˜æ•ˆæœ */
            background-image: linear-gradient(180deg, #ffffff, #fcfcfc); 
            
            border-radius: 10px; 
            border: 1px solid rgba(0,0,0,0.08); 
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none; 
            color: inherit; 
            padding: 15px 20px; 
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 80px; 
            overflow: hidden; 
        }

        .font-card:hover {
            transform: none; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.08); /* ç¨å¾®å¢å¼ºé˜´å½± */
            border-color: rgba(0,0,0,0.15); 
        }
        
        .card-info {
            padding: 0;
            display: block; 
            flex-shrink: 1; 
        }

        .font-name {
            font-size: 18px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 4px; 
            line-height: 1.2;
        }

        .font-author { /* è¿™ä¸ªæ ·å¼è™½ç„¶ä¿ç•™ï¼Œä½†ä¸å†æœ‰å†…å®¹è¾“å‡º */
            font-size: 13px;
            color: #888;
            margin-bottom: 0;
        }

        /* --- ä¿®æ”¹åçš„æ ·å¼ï¼šè°ƒæ•´å¡ç‰‡åº•éƒ¨å’Œè§„æ ¼æ˜¾ç¤º --- */
        .card-footer {
            /* ä¿æŒå³ä¾§æŒ‰é’®å’Œè§„æ ¼åœ¨å³è¾¹ */
            flex-shrink: 0; 
            margin-top: 0;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            border-top: none; 
            padding-top: 0;
            gap: 20px;
            margin-left: 20px;
        }

        .font-specs {
            /* ç§»åˆ° card-info å†…éƒ¨ï¼Œä¸å†æ˜¯ card-footer çš„ä¸€éƒ¨åˆ† */
            /* ä¿æŒåŸå­—ä½“å¤§å°å’Œé¢œè‰² */
            font-size: 13px; 
            color: #666; 
            display: block; /* ç¡®ä¿å®ƒåœ¨ font-name ä¸‹æ–¹ç‹¬å ä¸€è¡Œ */
            margin-top: 4px; /* åœ¨ font-name ä¸‹æ–¹æ·»åŠ é—´è· */
            margin-bottom: 0; /* ç§»é™¤ä¸å¿…è¦çš„åº•éƒ¨é—´è· */
        }
        
        /* å…³é”®ä¿®æ”¹ï¼šè°ƒæ•´ renderGrid ç”Ÿæˆçš„ HTML ç»“æ„ï¼Œ
           ç¡®ä¿ font-specs è¢«æ”¾ç½®åœ¨ card-info å†…ï¼Œå¹¶ä¿®æ”¹ card-info å†…éƒ¨çš„å¸ƒå±€ */
        
        /* ç°æœ‰ card-info å·²ç»æ˜¯ä¸€ä¸ª block å…ƒç´ ï¼Œä¸” flex-shrink: 1ï¼Œæ— éœ€é¢å¤–ä¿®æ”¹å…¶å¸ƒå±€ */

        .btn-view {
            font-size: 14px;
            font-weight: 600;
            color: #1a1a1a;
            text-decoration: none; 
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap; 
        }
        .btn-view::after {
            content: 'â†’';
            font-size: 14px;
            transition: transform 0.2s;
        }
        .font-card:hover .btn-view::after {
            transform: translateX(3px);
        }

        .empty-state {
            width: 100%;
            padding: 60px;
            text-align: center;
            color: #999;
            background: #fff;
            border: 1px dashed #ddd;
            border-radius: 12px;
        }

        /* --- åˆ†é¡µæ ·å¼ --- */
        .pagination-container {
            margin-top: 30px;
            margin-bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .page-link {
            padding: 8px 14px;
            border: 1px solid #ddd;
            border-radius: 6px;
            text-decoration: none;
            color: #666;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            background-color: #fff;
            user-select: none;
        }
        
        .page-link:hover:not(.active):not(.disabled) {
            border-color: #aaa;
            color: #1a1a1a;
        }

        .page-link.active {
            background-color: #1a1a1a;
            border-color: #1a1a1a;
            color: #fff;
            font-weight: 600;
            cursor: default;
        }

        .page-link.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-link.nav-arrow {
            font-size: 16px;
            padding: 8px 12px;
            font-weight: bold;
        }
        .page-link.nav-arrow.prev::before { content: '<'; } 
        .page-link.nav-arrow.next::before { content: '>'; } 


        /* --- Footer --- */
        .footer { 
            flex-shrink: 0; 
            padding: 40px 60px; 
            text-align: center; 
            color: #888; 
            font-size: 14px; 
            border-top: 1px solid rgba(0, 0, 0, 0.05); 
            width: 100%; 
            background-color: #fff; 
        }

        /* --- å“åº”å¼ --- */
        @media (max-width: 768px) {
            .navbar { height: 60px; padding: 0 20px; }
            .navbar-actions { display: none; }
            .menu-toggle { display: block; order: 3; }
            
            .navbar-menu { 
                position: absolute; top: 60px; left: 0; width: 100%; height: auto;
                max-height: calc(100vh - 60px); flex-direction: column; background-color: #fff;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); padding: 20px 0; gap: 0; overflow-y: auto;
                transform: translateY(-100%); visibility: hidden; opacity: 0; transition: all 0.4s ease-out;
            }
            .navbar-menu.active { transform: translateY(0); visibility: visible; opacity: 1; }
            .menu-item { width: 100%; padding: 10px 20px; align-items: flex-start; }
            .menu-link { width: 100%; padding: 10px 0; font-size: 16px; font-weight: 600; }
            .dropdown { position: static; transform: none; width: 100%; box-shadow: none; background-color: #f7f7f7; opacity: 1; visibility: visible; display: none; }
            .menu-item:hover .dropdown { display: block; }

            .main-content { padding-top: 20px; }
            .doc-container { flex-direction: column; gap: 20px; padding: 0 20px; }
            
            .sidebar { 
                width: 100%; 
                position: static; 
                max-height: none; 
                padding: 0;
                border: none; 
                box-shadow: none;
                background: transparent;
            }
            .category-header { background: #fff; border: 1px solid #eee; }
            .subcategory-list { margin-bottom: 10px; border: 1px solid #eee; border-top: none; border-radius: 0 0 8px 8px; background: #fff; }

            .content-area { padding: 0; }
            .font-grid { grid-template-columns: repeat(auto-fill, minmax(100%, 1fr)); gap: 15px; }
        }

    </style>
    </head>
<body>

    <div class="page-wrapper">
        
        <nav class="navbar" id="navbar">
            </nav>

        <div class="main-content">
            <div class="doc-container">
                
                <aside class="sidebar" id="sidebar">
                    <div class="search-container">
                        <input type="text" id="font-search-input" placeholder="è¾“å…¥å­—ä½“åç§°è¿›è¡Œæœç´¢...">
                    </div>
                    
                    <div id="sidebar-filters">
                        </div>
                </aside>

                <main class="content-area" id="content-area">
                    
                    <div class="grid-header">
                        <div>
                            <h2 id="grid-title">é»‘ä½“ / Sans-serif</h2>
                            <p id="grid-desc">æµè§ˆæˆ‘ä»¬ç²¾å¿ƒæŒ‘é€‰çš„å­—ä½“åº“</p>
                        </div>
                    </div>
                    
                    <div class="font-grid" id="font-grid-container">
                        </div>
                    
                    <div class="pagination-container" id="pagination-container">
                        
                    </div>
                </main>

            </div>
        </div>
        
        <footer class="footer" id="footer">
            </footer>

    </div> 
    
    <script src="https://www.zizao.top/pages/common.js"></script> 
    
    <script src="https://www.zizao.top/pages/bao-data.js"></script>

    <script>
        // --- 1. çŠ¶æ€ç®¡ç† ---
        // ğŸš¨ æ³¨æ„ï¼šSIDEBAR_CONFIG, CARDS_PER_PAGE, FONT_DATA ç°å·²åœ¨ bao-data.js ä¸­å®šä¹‰
        let State = {
            currentPage: 1,
            // åˆå§‹å€¼éœ€è¦ä» SIDEBAR_CONFIG ä¸­ç¡®å®šï¼Œç”±äºç”¨æˆ·æ–°åˆ†ç±»ï¼Œé»˜è®¤æ”¹ä¸º 'adobe'
            currentFilterHash: 'adobe', // å½“å‰æ¿€æ´»çš„ç­›é€‰hash
            currentFilterId: 'app', // å½“å‰æ¿€æ´»çš„ç­›é€‰ç»´åº¦ID (category, license, language)
            searchQuery: '' // å½“å‰æœç´¢è¯
        };
        
        // --- 2. è¾…åŠ©å‡½æ•°ï¼šé˜²æŠ– (Debounce) ---
        function debounce(func, delay) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), delay);
            };
        }

        // --- 3. æ¸²æŸ“å‡½æ•°ï¼šå¯¼èˆªæ  (Unchanged) ---
        function renderNavbar() {
            if (typeof APP_DATA === 'undefined' || !APP_DATA.navData) return;
            const data = APP_DATA.navData;
            const navbar = document.querySelector('#navbar');
            if (!navbar) return;
            let html = data.logoHtml;
            html += `<button class="menu-toggle"><span class="menu-toggle-icon"></span></button>`;
            let menuHtml = '<ul class="navbar-menu">';
            data.menuItems.forEach(item => {
                let dropdownHtml = '';
                if (item.dropdown && item.dropdown.length > 0) {
                    dropdownHtml = '<ul class="dropdown">';
                    item.dropdown.forEach(ddItem => {
                        const isSeparator = ddItem.separator ? ' style="border-top: 1px solid #f5f5f5; padding-top: 8px; margin-top: 8px;"' : '';
                        dropdownHtml += `<li${isSeparator}><a href="${ddItem.link}" class="dropdown-link">${ddItem.name}</a></li>`;
                    });
                    dropdownHtml += '</ul>';
                }
                const linkContent = `<a href="${item.link}" class="menu-link">${item.name}</a>`;
                menuHtml += `<li class="menu-item">${linkContent}${dropdownHtml}</li>`;
            });
            menuHtml += '</ul>';
            html += menuHtml;
            if (data.actionButton) {
                const targetAttr = data.actionButton.target ? `target="${data.actionButton.target}"` : '';
                const relAttr = data.actionButton.rel ? `rel="${data.actionButton.rel}"` : '';
                html += `<div class="navbar-actions"><a href="${data.actionButton.link}" class="btn-primary" ${targetAttr} ${relAttr}><span>${data.actionButton.text}</span></a></div>`;
            }
            navbar.innerHTML = html;
        }


        // --- 4. æ¸²æŸ“å‡½æ•°ï¼šåº•éƒ¨ (Unchanged) ---
        function renderFooter() {
             if (typeof APP_DATA === 'undefined' || !APP_DATA.footerData) return;
            const footer = document.querySelector('#footer');
            if (footer) footer.innerHTML = APP_DATA.footerData.copyright;
        }
        
        // --- 5. æ¸²æŸ“ä¾§è¾¹æ ç»“æ„ (åŸºäº SIDEBAR_CONFIG åŠ¨æ€ç”Ÿæˆ) ---
        function renderSidebar() {
            const sidebarContainer = document.getElementById('sidebar-filters');
            if (!sidebarContainer) return;

            let html = '<ul class="sidebar-menu">';
            
            SIDEBAR_CONFIG.forEach(group => {
                const groupTitleId = `group-${group.id}`;
                
                // ä½¿ç”¨åŸæœ‰çš„ category-item å’Œ category-header æ ·å¼
                html += `
                    <li class="category-item" data-category="${group.id}">
                        <div class="category-header open" id="${groupTitleId}">${group.title}<span class="collapse-icon">â–¼</span></div>
                        <ul class="subcategory-list" data-group-id="${group.id}" style="max-height: 500px;">
                `;

                group.options.forEach(option => {
                    // count-ID ç”¨äºè®¡æ•°ï¼Œhash ç”¨äºé“¾æ¥å’Œæ¿€æ´»çŠ¶æ€
                    html += `
                        <li><a href="#${option.hash}" class="subcategory-link" data-hash="${option.hash}" data-filter-id="${group.id}">
                            ${option.title} <span class="count-badge" id="count-${option.hash}">0</span>
                        </a></li>
                    `;
                });
                
                html += '</ul></li>';
            });

            html += '</ul>';
            sidebarContainer.innerHTML = html;
        }


        // --- 6. æ¸²æŸ“åˆ†é¡µæ§ä»¶ (Unchanged) ---
        function renderPagination(totalPages, currentPage) {
            const container = document.getElementById('pagination-container');
            if (totalPages <= 1) {
                container.innerHTML = '';
                return;
            }

            let html = '';
            
            // ä¸Šä¸€é¡µ
            const prevDisabled = currentPage === 1 ? 'disabled' : '';
            html += `<a href="#" class="page-link nav-arrow prev ${prevDisabled}" data-page="${currentPage - 1}"></a>`; 

            // é¡µç  
            const maxPageLinks = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxPageLinks / 2));
            let endPage = Math.min(totalPages, startPage + maxPageLinks - 1);
            
            if (endPage - startPage + 1 < maxPageLinks) {
                startPage = Math.max(1, endPage - maxPageLinks + 1);
            }

            for (let i = startPage; i <= endPage; i++) {
                const active = i === currentPage ? 'active' : '';
                html += `<a href="#" class="page-link ${active}" data-page="${i}">${i}</a>`;
            }

            // ä¸‹ä¸€é¡µ
            const nextDisabled = currentPage === totalPages ? 'disabled' : '';
            html += `<a href="#" class="page-link nav-arrow next ${nextDisabled}" data-page="${currentPage + 1}"></a>`;

            container.innerHTML = html;

            // ç»‘å®šç‚¹å‡»äº‹ä»¶
            container.querySelectorAll('.page-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (e.currentTarget.classList.contains('disabled')) return;
                    
                    const newPage = parseInt(e.currentTarget.getAttribute('data-page'));
                    
                    // è°ƒç”¨æ ¸å¿ƒæ¸²æŸ“å‡½æ•°ï¼Œä½¿ç”¨å½“å‰çš„çŠ¶æ€è¿›è¡Œåˆ†é¡µ
                    renderGrid(State.currentFilterHash, newPage, State.searchQuery);
                    
                    // æ»šåŠ¨åˆ°å¡ç‰‡é¡¶éƒ¨
                    document.getElementById('grid-title').scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            });
        }
        
        // --- 7. æ ¸å¿ƒé€»è¾‘ï¼šå¡ç‰‡ç½‘æ ¼æ¸²æŸ“ (æ›´æ–°ç­›é€‰é€»è¾‘) ---
        function renderGrid(filterHash, page = 1, searchQuery = '') {
            const gridContainer = document.getElementById('font-grid-container');
            const titleEl = document.getElementById('grid-title');
            const descEl = document.getElementById('grid-desc');
            const searchInput = document.getElementById('font-search-input');
            
            if (!gridContainer || !titleEl || !descEl || !searchInput) return;

            let filteredData = [];
            let pageTitle = '';
            
            // æŸ¥æ‰¾æ‰€æœ‰ç­›é€‰é€‰é¡¹çš„æ‰å¹³åŒ–åˆ—è¡¨
            const allFilterOptions = SIDEBAR_CONFIG.flatMap(group => 
                group.options.map(option => ({...option, groupId: group.id}))
            );

            // 1. æ•°æ®è¿‡æ»¤é€»è¾‘
            if (searchQuery) {
                // æœç´¢æ¨¡å¼
                searchQuery = decodeURIComponent(searchQuery).trim();
                
                // Case-insensitive search on font name
                filteredData = FONT_DATA.filter(item => 
                    item.name.toLowerCase().includes(searchQuery.toLowerCase())
                );
                
                pageTitle = `æœç´¢ç»“æœ: "${searchQuery}"`;
                
                // æ›´æ–° State
                State.searchQuery = searchQuery;
                State.currentFilterHash = ''; // æ¸…é™¤åˆ†ç±»çŠ¶æ€
                State.currentFilterId = '';
            } else {
                // åˆ†ç±»ç­›é€‰æ¨¡å¼
                State.searchQuery = '';
                
                // æŸ¥æ‰¾å½“å‰æ¿€æ´»çš„åˆ†ç±»é…ç½®
                let filterConfig = allFilterOptions.find(option => option.hash === filterHash);
                
                if (!filterConfig) {
                    // å¦‚æœhashæ— æ•ˆï¼Œé»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªåˆ†ç±»
                    filterConfig = allFilterOptions[0] || { hash: 'adobe', title: 'Adobeå…¨å®¶æ¡¶', groupId: 'app' };
                }
                
                const effectiveFilterHash = filterConfig.hash;
                
                // ğŸ¯ å…³é”®ï¼šæ ¹æ® group.id (å³å­—æ®µå) è¿›è¡Œé€šç”¨ç­›é€‰
                // æ£€æŸ¥ item[filterConfig.groupId] æ˜¯å¦å­˜åœ¨ä¸”ç­‰äº effectiveFilterHash
                filteredData = FONT_DATA.filter(item => item[filterConfig.groupId] === effectiveFilterHash);
                
                // æ›´æ–° State
                if (State.currentFilterHash !== effectiveFilterHash) {
                    State.currentPage = 1; // åˆ‡æ¢ç­›é€‰æ¡ä»¶æ—¶é‡ç½®é¡µç 
                }
                State.currentFilterHash = effectiveFilterHash;
                State.currentFilterId = filterConfig.groupId;
                
                // ç»„åˆæ ‡é¢˜ (ä¾‹å¦‚ï¼šè½¯ä»¶å·¥å…·: Adobeå…¨å®¶æ¡¶)
                const groupTitle = SIDEBAR_CONFIG.find(g => g.id === filterConfig.groupId)?.title;
                
                // â¬‡ï¸ ğŸ¯ å…³é”®ä¿®æ”¹: ç®€åŒ–æ ‡é¢˜æ˜¾ç¤ºï¼Œåªæ˜¾ç¤ºç­›é€‰é€‰é¡¹çš„ title
                // pageTitle = `${groupTitle}: ${filterConfig.title}`; // åŸä»£ç 
                pageTitle = filterConfig.title; // ä¿®æ”¹åçš„ä»£ç 
            }

            // 2. æ›´æ–°çŠ¶æ€ (currentPage éœ€è¦åœ¨ç­›é€‰åç¡®ä¿æœ‰æ•ˆ)
            const totalCards = filteredData.length;
            const totalPages = Math.ceil(totalCards / CARDS_PER_PAGE);
            const currentPage = Math.min(page, totalPages > 0 ? totalPages : 1);
            State.currentPage = currentPage; 
            
            const startIndex = (currentPage - 1) * CARDS_PER_PAGE;
            const endIndex = startIndex + CARDS_PER_PAGE;
            const paginatedData = filteredData.slice(startIndex, endIndex);

            // 3. è®¾ç½®æ ‡é¢˜å’Œæè¿°
            let pageDesc = `å…±æ‰¾åˆ° ${totalCards} æ¬¾èµ„æº`; 
            if (totalPages > 1) {
                 pageDesc += ` (å½“å‰ç¬¬ ${currentPage} / ${totalPages} é¡µ)`;
            }

            titleEl.innerText = pageTitle;
            descEl.innerText = pageDesc;
            
            // 4. åŒæ­¥æœç´¢æ¡†çš„å€¼
            searchInput.value = State.searchQuery;


            // 5. ç”Ÿæˆå¡ç‰‡ HTML (é‡è¦æ›´æ–°: ä½¿ç”¨ link å­—æ®µï¼Œç§»é™¤ author)
            if (paginatedData.length === 0) {
                gridContainer.innerHTML = `<div class="empty-state">æš‚æ— ç›¸å…³èµ„æº</div>`;
                gridContainer.style.display = 'block'; 
            } else {
                gridContainer.style.display = 'grid';
                let cardsHtml = '';
                
                paginatedData.forEach(font => {
                    // ğŸ¯ å˜æ›´: ä½¿ç”¨ font.link ä½œä¸ºå®é™…é“¾æ¥ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™é€€å›åˆ° #
                    const detailLink = font.link || '#'; 
                    
                    // ç»“æ„è°ƒæ•´ï¼šå°† font-specs ç§»åˆ° font-name ä¸‹æ–¹çš„ div.card-info å†…
                    cardsHtml += `
                        <a href="${detailLink}" target="_blank" class="font-card">
                            <div class="card-info">
                                <div class="font-name">${font.name}</div>
                                <div class="font-specs">${font.weight}</div> </div>
                            <div class="card-footer">
                                <span class="btn-view">ä¸‹è½½</span>
                            </div>
                        </a>
                    `;
                });
                gridContainer.innerHTML = cardsHtml;
            }

            // 6. æ¸²æŸ“åˆ†é¡µæ§ä»¶
            renderPagination(totalPages, currentPage);

            // 7. æ›´æ–°å·¦ä¾§èœå•çš„æ¿€æ´»çŠ¶æ€ (æœç´¢æ¨¡å¼ä¸‹å–æ¶ˆæ‰€æœ‰é«˜äº®)
            document.querySelectorAll('.subcategory-link').forEach(link => {
                link.classList.remove('active');
                if (!State.searchQuery && link.getAttribute('data-hash') === State.currentFilterHash) {
                    link.classList.add('active');
                }
            });
        }

        // --- 8. è¾…åŠ©åŠŸèƒ½ï¼šæ›´æ–°ä¾§è¾¹æ è®¡æ•° (é€šç”¨åŒ–) ---
        function updateSidebarCounts() {
            SIDEBAR_CONFIG.forEach(group => {
                group.options.forEach(option => {
                    // ğŸ¯ å…³é”®ï¼šæ ¹æ® group.id å’Œ option.hash è¿›è¡ŒåŠ¨æ€è®¡æ•°
                    const count = FONT_DATA.filter(i => i[group.id] === option.hash).length;
                    const countElement = document.getElementById(`count-${option.hash}`);
                    if (countElement) {
                        countElement.innerText = count;
                    }
                });
            });
        }
        
        // --- 9. æ ¸å¿ƒåŠŸèƒ½ï¼šå¤„ç† Hash å˜åŒ– (Unchanged) ---
        function handleHashChange(hash) {
            let filter = '';
            let search = '';
            
            // é»˜è®¤ä» hash ä¸­è§£æåˆ†ç±»ï¼Œå¦‚æœæ£€æµ‹åˆ°æœç´¢æ ¼å¼ï¼Œåˆ™åˆ‡æ¢ä¸ºæœç´¢æ¨¡å¼
            if (hash.startsWith('search=')) {
                search = hash.substring(7); // "search=".length is 7
                renderGrid(filter, 1, search);
            } else {
                filter = hash;
                renderGrid(filter, 1, search);
            }
        }

        // --- 10. é¡µé¢åˆå§‹åŒ–ä¸äº‹ä»¶ç»‘å®š ---
        function initPage() {
            // ğŸ¯ æ–°å¢ï¼šå…ˆæ¸²æŸ“ä¾§è¾¹æ ç»“æ„
            renderSidebar(); 
            
            // ä¾§è¾¹æ æŠ˜å èœå•ç‚¹å‡»äº‹ä»¶ (ä¿ç•™ï¼Œå› ä¸ºä½¿ç”¨äº†ç›¸åŒçš„ç±»å)
            document.querySelectorAll('.category-header').forEach(header => {
                header.addEventListener('click', (e) => {
                    const list = e.currentTarget.nextElementSibling;
                    e.currentTarget.classList.toggle('open');
                    if (e.currentTarget.classList.contains('open')) {
                        // ç¡®ä¿å±•å¼€æ—¶è®¡ç®—æ­£ç¡®çš„ max-height
                        list.style.maxHeight = list.scrollHeight + 'px';
                    } else {
                        list.style.maxHeight = '0';
                    }
                });
            });

            // ç›‘å¬ Hash å˜åŒ–ï¼Œä½œä¸ºç»Ÿä¸€å…¥å£
            window.addEventListener('hashchange', () => {
                const newHash = window.location.hash.slice(1);
                handleHashChange(newHash);
            });
            
            // ç»‘å®šæœç´¢æ¡†äº‹ä»¶
            const searchInput = document.getElementById('font-search-input');
            searchInput.addEventListener('input', debounce(() => {
                const query = searchInput.value.trim();
                let newHash = '';
                if (query) {
                    // å¦‚æœæœ‰æœç´¢è¯ï¼Œè®¾ç½® hash ä¸º search=query
                    newHash = `search=${encodeURIComponent(query)}`;
                } else {
                    // å¦‚æœæœç´¢æ¡†è¢«æ¸…ç©ºï¼Œåˆ™åˆ‡æ¢å›å½“å‰æ¿€æ´»çš„ç­›é€‰ hash
                    newHash = State.currentFilterHash || 'adobe'; // é»˜è®¤æ”¹ä¸º 'adobe'
                }
                window.location.hash = newHash;
            }, 300)); // 300ms é˜²æŠ–ï¼Œä¼˜åŒ–æ€§èƒ½

            // åˆå§‹æ¸²æŸ“
            updateSidebarCounts();
            const initialHash = window.location.hash.slice(1);
            
            // ç¡®ä¿åˆå§‹æ—¶æ‰€æœ‰åˆ—è¡¨å±•å¼€ (å› ä¸º CSS é»˜è®¤ max-height: 0)
            document.querySelectorAll('.subcategory-list').forEach(list => {
                list.style.maxHeight = list.scrollHeight + 'px';
            });
            
            // åˆå§‹æ—¶è°ƒç”¨ä¸€æ¬¡ï¼Œä½¿ç”¨é»˜è®¤åˆ†ç±» 'adobe'
            handleHashChange(initialHash || 'adobe'); 
        }

        document.addEventListener('DOMContentLoaded', () => {
            // æ£€æŸ¥å¤–éƒ¨ APP_DATA æ˜¯å¦åŠ è½½ï¼Œå¦‚æœæ²¡æœ‰åˆ™å®šä¹‰ä¸€ä¸ªç©ºçš„ä»¥é˜²æŠ¥é”™
            if (typeof APP_DATA === 'undefined') {
                window.APP_DATA = {
                    navData: { logoHtml: '<a href="#" class="navbar-logo"><img src="logo.svg" alt="Logo"></a>', menuItems: [], actionButton: null },
                    footerData: { copyright: 'Â© 2025 Font Library. All rights reserved.' }
                };
            }
            
            renderNavbar();
            renderFooter();

            const menuToggle = document.querySelector('.menu-toggle');
            const menu = document.querySelector('.navbar-menu');
            if (menuToggle && menu) {
                menuToggle.addEventListener('click', () => {
                    menu.classList.toggle('active');
                });
            }
            
            initPage();
        });
    </script>
</body>
</html>